<div class="col-lg-12 col-sm-12">
    <h2 mat-dialog-title>Creación de proyectos</h2>
    <div mat-dialog-content>
      <form [formGroup]="formCreateProject"> <!--Llamado del formulario que creamos-->
        <div class="col-lg-12 col-md-12 col-sm-12 custom-margin mt-4">
          <div class="row">
            <div class="col-lg-6 col-md-6 col-sm-6"> <!--div que contiene el input del nombre-->
              <mat-form-field class="w-100" appearance="outline">
                <mat-label>Nombre del proyecto</mat-label>
                <input matInput formControlName="nombre">
                <mat-error *ngIf="formCreateProject.get('nombre')?.hasError('required')">
                  El nombre es obligatorio
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-6"> <!--div del input del presupuesto-->
              <mat-form-field class="w-100" appearance="outline">
                <mat-label>Presupuesto</mat-label>
                <input matInput formControlName="presupuesto" type="number">
                <mat-error *ngIf="formCreateProject.get('presupuesto')?.hasError('required')">
                  El presupuesto es obligatorio
                </mat-error>
                <mat-error *ngIf="formCreateProject.get('presupuesto')?.hasError('min')">
                  El presupuesto debe ser mayor a 0
                </mat-error>
              </mat-form-field>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-12 col-sm-12">
              <mat-form-field class="w-100" appearance="outline">
                <mat-label>Descripción</mat-label>
                <textarea matInput formControlName="descripcion" rows="3"></textarea>
                <mat-error *ngIf="formCreateProject.get('descripcion')?.hasError('required')">
                  La descripción es obligatoria
                </mat-error>
              </mat-form-field>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-6 col-md-6 col-sm-6">
              <mat-form-field class="w-100" appearance="outline">
                <mat-label>Fecha de inicio</mat-label>
                <input matInput formControlName="fecha_inicio" type="date" (change)="validateDates()">
                <mat-error *ngIf="formCreateProject.get('fecha_inicio')?.hasError('required')">
                  La fecha de inicio es obligatoria
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-6">
              <mat-form-field class="w-100" appearance="outline">
                <mat-label>Fecha de finalización</mat-label>
                <input matInput formControlName="fecha_fin" type="date" (change)="validateDates()">
                <mat-error *ngIf="formCreateProject.get('fecha_fin')?.hasError('required')">
                  La fecha de finalización es obligatoria
                </mat-error>
                <mat-error *ngIf="formCreateProject.get('fecha_fin')?.hasError('invalidDateRange')">
                  La fecha de finalización debe ser posterior a la fecha de inicio
                </mat-error>
              </mat-form-field>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-6 col-md-6 col-sm-6">
              <mat-form-field class="w-100" appearance="outline">
                <mat-label>Estado</mat-label>
                <mat-select formControlName="estado">
                  <mat-option value="">Seleccionar</mat-option>
                  <mat-option value="Pendiente">Pendiente</mat-option>
                  <mat-option value="En progreso">En progreso</mat-option>
                  <mat-option value="Completado">Completado</mat-option>
                  <mat-option value="Cancelado">Cancelado</mat-option>
                </mat-select>
                <mat-error *ngIf="formCreateProject.get('estado')?.hasError('required')">
                  El estado es obligatorio
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-6">
              <mat-form-field class="w-100" appearance="outline">
                <mat-label>Categoría</mat-label>
                <mat-select formControlName="categoria_id">
                  <mat-option value="">Seleccionar</mat-option>
                  <ng-container *ngFor="let categoria of categoryValues; track $index">
                    <mat-option [value]="categoria.id">{{ categoria.nombre }}</mat-option>
                  </ng-container>
                </mat-select>
                <mat-error *ngIf="formCreateProject.get('categoria_id')?.hasError('required')">
                  La categoría es obligatoria
                </mat-error>
              </mat-form-field>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-6 col-md-6 col-sm-6">
              <mat-form-field class="w-100" appearance="outline">
                <mat-label>Cliente</mat-label>
                <mat-select formControlName="cliente_id">
                  <mat-option value="">Seleccionar</mat-option>
                  <ng-container *ngFor="let cliente of clientValues; track $index">
                    <mat-option [value]="cliente.id">{{ cliente.nombre }}</mat-option>
                  </ng-container>
                </mat-select>
                <mat-error *ngIf="formCreateProject.get('cliente_id')?.hasError('required')">
                  El cliente es obligatorio
                </mat-error>
              </mat-form-field>
            </div>
          </div>
        </div>
      </form>
    </div>
    <mat-dialog-actions align="end">
      <button mat-button mat-dialog-close>Cancelar</button>
      <button 
        mat-button 
        cdkFocusInitial 
        [disabled]="formCreateProject.invalid" 
        (click)="onSubmit()"
      >
        Crear
      </button>
    </mat-dialog-actions>
</div>